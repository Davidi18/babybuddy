{% load i18n %}
<form action="{% url 'core:timer-add-quick' %}"
      role="form"
      method="post"
      class="mr-2">
    {% csrf_token %}
    {% if children.count > 1 %}
        <div class="dropdown show">
        <a class="m-0 p-0 text-success"
           title="{% trans "Quick Start Timer" %}"
           href="#"
           role="button"
           id="quick-timer-menu-toggle"
           data-bs-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false"><i class="icon-2x icon-timer" aria-hidden="true"></i>
    </a>
    <div class="dropdown-menu dropdown-menu-end bg-dark shadow"
         aria-labelledby="quick-timer-menu-toggle"
         style="border: 1px solid rgba(255,255,255,0.1); min-width: 200px; max-width: 280px; width: 280px;">
        <h6 class="dropdown-header text-muted">{% trans "Quick Start Timer Forâ€¦" %}</h6>
        {% for child in children %}
            <button class="dropdown-item d-flex align-items-center py-2 px-3"
                    type="submit"
                    name="child"
                    value="{{ child.pk }}"
                    style="color: rgba(255, 255, 255, 0.85); white-space: normal !important; width: 100%; box-sizing: border-box;">
                {% include "core/child_thumbnail.html" %}
                <span class="ms-2 flex-grow-1" style="word-break: break-word; overflow: hidden; text-overflow: ellipsis; display: block;">{{ child }}</span>
            </button>
        {% endfor %}
    </div>
</div>
{% else %}
<label class="visually-hidden">{% trans "Quick Start Timer" %}</label>
<button class="btn m-0 p-0 text-success">
    <i class="icon-2x icon-timer" aria-hidden="true"></i>
</button>
{% endif %}
</form>

<style>
/* Timer dropdown styling */
#quick-timer-menu-toggle + .dropdown-menu.bg-dark {
    width: 280px !important;
    max-width: 280px !important;
    min-width: 280px !important;
    box-sizing: border-box !important;
    right: 0 !important;
    left: auto !important;
}

@media (max-width: 768px) {
    #quick-timer-menu-toggle + .dropdown-menu.bg-dark {
        right: -10px !important;
        left: auto !important;
    }
}

#quick-timer-menu-toggle + .dropdown-menu.bg-dark .dropdown-item {
    transition: background-color 0.15s ease-in-out;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    width: 100% !important;
    box-sizing: border-box !important;
    display: flex !important;
    align-items: center !important;
}

#quick-timer-menu-toggle + .dropdown-menu.bg-dark .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: rgba(255, 255, 255, 1) !important;
}

#quick-timer-menu-toggle + .dropdown-menu.bg-dark .dropdown-item img {
    width: 30px !important;
    height: 30px !important;
    min-width: 30px !important;
    min-height: 30px !important;
    max-width: 30px !important;
    max-height: 30px !important;
    object-fit: cover !important;
    flex-shrink: 0 !important;
    margin-right: 0.5rem !important;
}

#quick-timer-menu-toggle + .dropdown-menu.bg-dark .dropdown-item span {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    flex: 1 !important;
    min-width: 0 !important;
}
</style>
